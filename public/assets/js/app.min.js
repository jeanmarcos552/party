$(document).ready(function () {
    $("#back").hide();
    var selected;

    var project = {
        maskCpf: function (input) {
            $(input).mask('000.000.000-00', {reverse: true});
        },
        tooltip: function (id) {
            $(id).tooltip()
        }
    };

    project.maskCpf('input[name=cpf]');
    project.tooltip('[data-toggle="tooltip"]');


    function validadeCPF(strCPF) {
        var cpf = strCPF.replace(/[^\d]+/g,'');

        var Soma;
        var Resto;
        Soma = 0;
        if (cpf == "00000000000") return false;

        for (i=1; i<=9; i++) Soma = Soma + parseInt(cpf.substring(i-1, i)) * (11 - i);
        Resto = (Soma * 10) % 11;

        if ((Resto == 10) || (Resto == 11))  Resto = 0;
        if (Resto != parseInt(cpf.substring(9, 10)) ) return false;

        Soma = 0;
        for (i = 1; i <= 10; i++) Soma = Soma + parseInt(cpf.substring(i-1, i)) * (12 - i);
        Resto = (Soma * 10) % 11;

        if ((Resto == 10) || (Resto == 11))  Resto = 0;
        if (Resto != parseInt(cpf.substring(10, 11) ) ) return false;
        return true;
    }

    $("body").on("keyup", "form", function(e){
        if (e.which == 13){
            if ($("#next").is(":visible") && $("fieldset.current").find("input, textarea").valid() ){
                e.preventDefault();
                $("#back").fadeIn(3000);
                nextSection();
                return false;
            }
        }
    });

    $("#next").on("click", function(e){
        $("#back").fadeIn(1000);

        var chkArray = [];
        $("input:checked").each(function () {
            chkArray.push($(this).val());
        });

        selected = chkArray;

        console.log(JSON.stringify(selected));

        nextSection();
    });

    $("form").submit(function(){
        var $this = $(this);
        var $insta = $this.find('input[name=insta]');
        var $cpf = $this.find('input[name=cpf]');
        var $email = $this.find('input[name=email]');
        var $url = $this.attr("action");

        if ($email.val() !== '') {
            $($email).css('border', '1px solid green');
        }
        else{
            $($email).css('border', '1px solid red');
        }

        if ($cpf.val() !== '') {
            $($cpf).css('border', '1px solid green');

            if (validadeCPF($cpf.val()) !== true){
                $("#results").html("<p>cpf inválido!</p>");
                $($cpf).css('border', '1px solid red');
            }
            else{
                $("#results").remove();
            }
        }
        else {
            $($cpf).css('border', '1px solid red');
        }

        console.log($cpf.val(), $email.val())

        if ($cpf.val() !== '' && validadeCPF($cpf.val()) === true && $email.val() !== '') {
            $(".sk-folding-cube").show();

            $.ajax({
                method: "POST",
                url: $url + "api/v1/save",
                data: {
                    cpf: $cpf.val(),
                    instagram: $insta.val(),
                    email: $email.val(),
                }
            }).done(function(response) {
                $(".sk-folding-cube").hide();
                console.log(response);
                if (response === '200'){
                    location.href = 'https://www.eventbrite.com.br/e/wurm-tickets-46172290564#/tickets';
                }
                else{
                    alert("Dados inválidos!");
                }
            });
        }

        return false;

    });

    function goToSection(i){
        $("fieldset:gt("+i+")").removeClass("current").addClass("next");
        $("fieldset:lt("+i+")").removeClass("current");
        $("li").eq(i).addClass("current").siblings().removeClass("current");

        setTimeout(function(){
            $("fieldset").eq(i).removeClass("next").addClass("current active");

            if ($("fieldset.current").index() == 0){
                $("#back").fadeOut("slow");
            }

            if ($("fieldset.current").index() == 1){
                $("#next").hide();
                $("input[type=submit]").show();
            } else {
                $("#next").show();
                $("input[type=submit]").hide();
            }
        }, 80);
    }

    function nextSection(){
        var i = $("fieldset.current").index();
        if (i < 2){
            $("li").eq(i+1).addClass("active");
            goToSection(i+1);
        }
    }

    $("#back").on("click", function (e) {
        var $this = $(".current");
        var go = $this.index() - 1;

        if (go >= 0 ) {
            goToSection(go);
        }

    });

    $("li").on("click", function(e){
        var i = $(this).index();

        if ($(this).hasClass("active")){
            goToSection(i);
        }
    });

});
// $('#myModal').on('shown.bs.modal', function () {
//   $('#video video')[0].play();
// })
// $('#myModal').on('hidden.bs.modal', function () {
//   $('#video video')[0].pause();
// })

// $('#video video').click(function(){this.paused?this.play():this.pause();});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICQoXCIjYmFja1wiKS5oaWRlKCk7XG4gICAgdmFyIHNlbGVjdGVkO1xuXG4gICAgdmFyIHByb2plY3QgPSB7XG4gICAgICAgIG1hc2tDcGY6IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICAgICAgJChpbnB1dCkubWFzaygnMDAwLjAwMC4wMDAtMDAnLCB7cmV2ZXJzZTogdHJ1ZX0pO1xuICAgICAgICB9LFxuICAgICAgICB0b29sdGlwOiBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgICQoaWQpLnRvb2x0aXAoKVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHByb2plY3QubWFza0NwZignaW5wdXRbbmFtZT1jcGZdJyk7XG4gICAgcHJvamVjdC50b29sdGlwKCdbZGF0YS10b2dnbGU9XCJ0b29sdGlwXCJdJyk7XG5cblxuICAgIGZ1bmN0aW9uIHZhbGlkYWRlQ1BGKHN0ckNQRikge1xuICAgICAgICB2YXIgY3BmID0gc3RyQ1BGLnJlcGxhY2UoL1teXFxkXSsvZywnJyk7XG5cbiAgICAgICAgdmFyIFNvbWE7XG4gICAgICAgIHZhciBSZXN0bztcbiAgICAgICAgU29tYSA9IDA7XG4gICAgICAgIGlmIChjcGYgPT0gXCIwMDAwMDAwMDAwMFwiKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgZm9yIChpPTE7IGk8PTk7IGkrKykgU29tYSA9IFNvbWEgKyBwYXJzZUludChjcGYuc3Vic3RyaW5nKGktMSwgaSkpICogKDExIC0gaSk7XG4gICAgICAgIFJlc3RvID0gKFNvbWEgKiAxMCkgJSAxMTtcblxuICAgICAgICBpZiAoKFJlc3RvID09IDEwKSB8fCAoUmVzdG8gPT0gMTEpKSAgUmVzdG8gPSAwO1xuICAgICAgICBpZiAoUmVzdG8gIT0gcGFyc2VJbnQoY3BmLnN1YnN0cmluZyg5LCAxMCkpICkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIFNvbWEgPSAwO1xuICAgICAgICBmb3IgKGkgPSAxOyBpIDw9IDEwOyBpKyspIFNvbWEgPSBTb21hICsgcGFyc2VJbnQoY3BmLnN1YnN0cmluZyhpLTEsIGkpKSAqICgxMiAtIGkpO1xuICAgICAgICBSZXN0byA9IChTb21hICogMTApICUgMTE7XG5cbiAgICAgICAgaWYgKChSZXN0byA9PSAxMCkgfHwgKFJlc3RvID09IDExKSkgIFJlc3RvID0gMDtcbiAgICAgICAgaWYgKFJlc3RvICE9IHBhcnNlSW50KGNwZi5zdWJzdHJpbmcoMTAsIDExKSApICkgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAkKFwiYm9keVwiKS5vbihcImtleXVwXCIsIFwiZm9ybVwiLCBmdW5jdGlvbihlKXtcbiAgICAgICAgaWYgKGUud2hpY2ggPT0gMTMpe1xuICAgICAgICAgICAgaWYgKCQoXCIjbmV4dFwiKS5pcyhcIjp2aXNpYmxlXCIpICYmICQoXCJmaWVsZHNldC5jdXJyZW50XCIpLmZpbmQoXCJpbnB1dCwgdGV4dGFyZWFcIikudmFsaWQoKSApe1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAkKFwiI2JhY2tcIikuZmFkZUluKDMwMDApO1xuICAgICAgICAgICAgICAgIG5leHRTZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAkKFwiI25leHRcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbihlKXtcbiAgICAgICAgJChcIiNiYWNrXCIpLmZhZGVJbigxMDAwKTtcblxuICAgICAgICB2YXIgY2hrQXJyYXkgPSBbXTtcbiAgICAgICAgJChcImlucHV0OmNoZWNrZWRcIikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjaGtBcnJheS5wdXNoKCQodGhpcykudmFsKCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzZWxlY3RlZCA9IGNoa0FycmF5O1xuXG4gICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHNlbGVjdGVkKSk7XG5cbiAgICAgICAgbmV4dFNlY3Rpb24oKTtcbiAgICB9KTtcblxuICAgICQoXCJmb3JtXCIpLnN1Ym1pdChmdW5jdGlvbigpe1xuICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICB2YXIgJGluc3RhID0gJHRoaXMuZmluZCgnaW5wdXRbbmFtZT1pbnN0YV0nKTtcbiAgICAgICAgdmFyICRjcGYgPSAkdGhpcy5maW5kKCdpbnB1dFtuYW1lPWNwZl0nKTtcbiAgICAgICAgdmFyICRlbWFpbCA9ICR0aGlzLmZpbmQoJ2lucHV0W25hbWU9ZW1haWxdJyk7XG4gICAgICAgIHZhciAkdXJsID0gJHRoaXMuYXR0cihcImFjdGlvblwiKTtcblxuICAgICAgICBpZiAoJGVtYWlsLnZhbCgpICE9PSAnJykge1xuICAgICAgICAgICAgJCgkZW1haWwpLmNzcygnYm9yZGVyJywgJzFweCBzb2xpZCBncmVlbicpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICAkKCRlbWFpbCkuY3NzKCdib3JkZXInLCAnMXB4IHNvbGlkIHJlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCRjcGYudmFsKCkgIT09ICcnKSB7XG4gICAgICAgICAgICAkKCRjcGYpLmNzcygnYm9yZGVyJywgJzFweCBzb2xpZCBncmVlbicpO1xuXG4gICAgICAgICAgICBpZiAodmFsaWRhZGVDUEYoJGNwZi52YWwoKSkgIT09IHRydWUpe1xuICAgICAgICAgICAgICAgICQoXCIjcmVzdWx0c1wiKS5odG1sKFwiPHA+Y3BmIGludsOhbGlkbyE8L3A+XCIpO1xuICAgICAgICAgICAgICAgICQoJGNwZikuY3NzKCdib3JkZXInLCAnMXB4IHNvbGlkIHJlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAkKFwiI3Jlc3VsdHNcIikucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAkKCRjcGYpLmNzcygnYm9yZGVyJywgJzFweCBzb2xpZCByZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCRjcGYudmFsKCksICRlbWFpbC52YWwoKSlcblxuICAgICAgICBpZiAoJGNwZi52YWwoKSAhPT0gJycgJiYgdmFsaWRhZGVDUEYoJGNwZi52YWwoKSkgPT09IHRydWUgJiYgJGVtYWlsLnZhbCgpICE9PSAnJykge1xuICAgICAgICAgICAgJChcIi5zay1mb2xkaW5nLWN1YmVcIikuc2hvdygpO1xuXG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgdXJsOiAkdXJsICsgXCJhcGkvdjEvc2F2ZVwiLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgY3BmOiAkY3BmLnZhbCgpLFxuICAgICAgICAgICAgICAgICAgICBpbnN0YWdyYW06ICRpbnN0YS52YWwoKSxcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6ICRlbWFpbC52YWwoKSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5kb25lKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgJChcIi5zay1mb2xkaW5nLWN1YmVcIikuaGlkZSgpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgPT09ICcyMDAnKXtcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9ICdodHRwczovL3d3dy5ldmVudGJyaXRlLmNvbS5ici9lL3d1cm0tdGlja2V0cy00NjE3MjI5MDU2NCMvdGlja2V0cyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiRGFkb3MgaW52w6FsaWRvcyFcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIGdvVG9TZWN0aW9uKGkpe1xuICAgICAgICAkKFwiZmllbGRzZXQ6Z3QoXCIraStcIilcIikucmVtb3ZlQ2xhc3MoXCJjdXJyZW50XCIpLmFkZENsYXNzKFwibmV4dFwiKTtcbiAgICAgICAgJChcImZpZWxkc2V0Omx0KFwiK2krXCIpXCIpLnJlbW92ZUNsYXNzKFwiY3VycmVudFwiKTtcbiAgICAgICAgJChcImxpXCIpLmVxKGkpLmFkZENsYXNzKFwiY3VycmVudFwiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKFwiY3VycmVudFwiKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAkKFwiZmllbGRzZXRcIikuZXEoaSkucmVtb3ZlQ2xhc3MoXCJuZXh0XCIpLmFkZENsYXNzKFwiY3VycmVudCBhY3RpdmVcIik7XG5cbiAgICAgICAgICAgIGlmICgkKFwiZmllbGRzZXQuY3VycmVudFwiKS5pbmRleCgpID09IDApe1xuICAgICAgICAgICAgICAgICQoXCIjYmFja1wiKS5mYWRlT3V0KFwic2xvd1wiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCQoXCJmaWVsZHNldC5jdXJyZW50XCIpLmluZGV4KCkgPT0gMSl7XG4gICAgICAgICAgICAgICAgJChcIiNuZXh0XCIpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKFwiaW5wdXRbdHlwZT1zdWJtaXRdXCIpLnNob3coKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJChcIiNuZXh0XCIpLnNob3coKTtcbiAgICAgICAgICAgICAgICAkKFwiaW5wdXRbdHlwZT1zdWJtaXRdXCIpLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgODApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5leHRTZWN0aW9uKCl7XG4gICAgICAgIHZhciBpID0gJChcImZpZWxkc2V0LmN1cnJlbnRcIikuaW5kZXgoKTtcbiAgICAgICAgaWYgKGkgPCAyKXtcbiAgICAgICAgICAgICQoXCJsaVwiKS5lcShpKzEpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgZ29Ub1NlY3Rpb24oaSsxKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgICQoXCIjYmFja1wiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciAkdGhpcyA9ICQoXCIuY3VycmVudFwiKTtcbiAgICAgICAgdmFyIGdvID0gJHRoaXMuaW5kZXgoKSAtIDE7XG5cbiAgICAgICAgaWYgKGdvID49IDAgKSB7XG4gICAgICAgICAgICBnb1RvU2VjdGlvbihnbyk7XG4gICAgICAgIH1cblxuICAgIH0pO1xuXG4gICAgJChcImxpXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSl7XG4gICAgICAgIHZhciBpID0gJCh0aGlzKS5pbmRleCgpO1xuXG4gICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKFwiYWN0aXZlXCIpKXtcbiAgICAgICAgICAgIGdvVG9TZWN0aW9uKGkpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbn0pO1xuLy8gJCgnI215TW9kYWwnKS5vbignc2hvd24uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG4vLyAgICQoJyN2aWRlbyB2aWRlbycpWzBdLnBsYXkoKTtcbi8vIH0pXG4vLyAkKCcjbXlNb2RhbCcpLm9uKCdoaWRkZW4uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG4vLyAgICQoJyN2aWRlbyB2aWRlbycpWzBdLnBhdXNlKCk7XG4vLyB9KVxuXG4vLyAkKCcjdmlkZW8gdmlkZW8nKS5jbGljayhmdW5jdGlvbigpe3RoaXMucGF1c2VkP3RoaXMucGxheSgpOnRoaXMucGF1c2UoKTt9KTsiXX0=
